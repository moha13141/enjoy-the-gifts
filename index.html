<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enjoy The Gifts</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Cpath fill='%23c5a47e' d='M32 448c0 17.7 14.3 32 32 32h160V320H32v128zm256 32h160c17.7 0 32-14.3 32-32V320H288v160zm192-320h-4.1c23.2-25.2 36.1-57.9 36.1-92.5C512 56 466.1 9.7 408 0c-45.9 7.7-82.8 42.6-96.3 86.4c-13.4-43.8-50.4-78.7-96.3-86.4C157.9 9.7 112 56 112 123.5c0 34.6 12.9 67.3 36.1 92.5H128V288h384V160zM256 64c26.5 0 48 21.5 48 48s-21.5 48-48 48s-48-21.5-48-48s21.5-48 48-48z'/%3E%3C/svg%3E">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
        :root{--primary-color:#c5a47e;--secondary-color:#2c3e50;--background-color:#f8f9fa;--text-color:#34495e;--light-gray:#ecf0f1;--white-color:#ffffff;--success-color:#27ae60;--danger-color:#e74c3c}*{margin:0;padding:0;box-sizing:border-box}html{scroll-behavior:smooth}body{font-family:'Cairo',sans-serif;background-color:var(--background-color);color:var(--text-color);line-height:1.8}.container{max-width:1200px;margin:0 auto;padding:0 20px}.section{padding:80px 0}#products,#contact,#why-us{background-color:var(--white-color)}#testimonials-cta,#weekly-offer{background-color:var(--background-color)}.section-title{text-align:center;font-size:2.8rem;margin-bottom:20px;color:var(--secondary-color);font-weight:900;position:relative}.section-title::after{content:'';display:block;width:80px;height:4px;background-color:var(--primary-color);margin:20px auto 0;border-radius:2px}header{background-color:var(--white-color);box-shadow:0 2px 15px rgba(0,0,0,.08);padding:15px 0;position:sticky;top:0;z-index:1000}header .container{display:flex;justify-content:space-between;align-items:center}.logo{font-size:2rem;font-weight:900;color:var(--secondary-color);text-decoration:none;transition:color .3s}.logo:hover{color:var(--primary-color)}header nav{display:flex;align-items:center;gap:25px}header nav a{text-decoration:none;color:var(--text-color);font-weight:700;font-size:1rem;transition:color .3s ease}header nav a:hover{color:var(--primary-color)}.cart-icon{position:relative;cursor:pointer;color:var(--secondary-color);font-size:1.8rem;transition:color .3s}.cart-icon:hover{color:var(--primary-color)}#cart-count{position:absolute;top:-8px;right:-12px;background-color:var(--danger-color);color:#fff;border-radius:50%;width:24px;height:24px;display:flex;justify-content:center;align-items:center;font-size:.85rem;font-weight:700;border:2px solid var(--white-color)}.hero{background:linear-gradient(rgba(44,62,80,.85),rgba(44,62,80,.85)),url(https://images.pexels.com/photos/3727513/pexels-photo-3727513.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1) no-repeat center center/cover;color:var(--white-color);text-align:center;padding:120px 20px}.hero-content h1{font-size:clamp(2.5rem,5vw,4rem);font-weight:900;margin-bottom:15px;color:var(--white-color);text-shadow:2px 2px 5px rgba(0,0,0,.5)}.hero-content h1 span{color:var(--primary-color)}.hero-content p{font-size:clamp(1.1rem,2.5vw,1.3rem);max-width:650px;margin:0 auto 30px}.cta-button{background-color:var(--primary-color);color:var(--secondary-color);padding:14px 35px;border-radius:50px;text-decoration:none;font-weight:700;font-size:1.1rem;transition:all .3s ease;border:none;cursor:pointer;display:inline-block}.cta-button:hover{background-color:var(--white-color);transform:translateY(-3px);box-shadow:0 5px 20px rgba(0,0,0,.2)}.page-view{display:none;padding:60px 0;animation:fadeIn .5s ease-in-out}@keyframes fadeIn{from{opacity:0}to{opacity:1}}.page-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:50px;border-bottom:2px solid var(--light-gray);padding-bottom:20px}.back-button{background:var(--secondary-color);color:#fff;border:none;padding:12px 24px;border-radius:8px;cursor:pointer;font-family:'Cairo',sans-serif;font-size:1rem;font-weight:700}.checkout-form{max-width:700px;margin:0 auto;background:#fff;padding:40px;border-radius:10px;box-shadow:0 5px 25px rgba(0,0,0,.1)}.checkout-form label{display:block;margin-bottom:10px;font-weight:700;color:var(--secondary-color);font-size:1.1rem}.checkout-form input,.checkout-form textarea,.checkout-form select{width:100%;padding:12px;margin-bottom:20px;border:1px solid #ccc;border-radius:5px;font-family:'Cairo',sans-serif;font-size:1rem;box-sizing:border-box}.form-instructions{padding:20px;background-color:#eaf2f8;border-right:5px solid #3498db;border-radius:5px;margin-bottom:25px}.total-price-display{background-color:#f8f9fa;border:2px dashed var(--primary-color);border-radius:8px;padding:15px;text-align:center;font-size:1.4rem;font-weight:700;margin-bottom:20px}.total-price-display span{color:var(--success-color)}.modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);z-index:3000;display:none;justify-content:center;align-items:center}.modal-content{background:var(--white-color);padding:40px;border-radius:15px;text-align:center;max-width:500px;width:90%;box-shadow:0 5px 20px rgba(0,0,0,.2)}.modal-content h2{font-size:2rem;color:var(--secondary-color)}.modal-content .close-button{background:var(--secondary-color);color:#fff;border:none;padding:12px 35px;border-radius:50px;cursor:pointer}
    </style>
</head>
<body>
    <header>
        <div class="container">
            <a href="#" class="logo" onclick="showMainPage(event); return false;">Enjoy The Gifts</a>
            <nav>
                <a href="#products" onclick="showMainPage(event, '#products')">منتجاتنا</a>
                <a href="#weekly-offer" onclick="showMainPage(event, '#weekly-offer')">عرض الأسبوع</a>
                <a href="#" onclick="showPage('testimonials-page'); return false;">آراء العملاء</a>
                <a href="#contact" onclick="showMainPage(event, '#contact')">تواصل معنا</a>
                <div class="cart-icon" onclick="showPage('cart-page')"><i class="fas fa-shopping-cart"></i><span id="cart-count">0</span></div>
            </nav>
        </div>
    </header>

    <div id="main-content">
        <!-- كل محتوى الصفحة الرئيسية يتم عرضه هنا بواسطة الجافاسكريبت -->
    </div>
    
    <!-- الصفحات الفرعية التي يتم التحكم بها بواسطة الجافاسكريبت -->
    <div id="testimonials-page" class="page-view"></div>
    <div id="watches-page" class="page-view"></div>
    <div id="printing-categories-page" class="page-view"></div>
    
    <div id="cart-page" class="page-view">
        <div class="container">
            <div class="page-header">
                <h2 class="section-title" style="margin-bottom: 0;">إتمام الطلب</h2>
                <button class="back-button" onclick="showMainPage()"><i class="fas fa-arrow-left"></i> العودة للرئيسية</button>
            </div>
            <div class="checkout-form">
                <form id="checkout-form-element" method="POST">
                    <p style="text-align:center; font-size:1.1rem; margin-bottom:25px;">برجاء ملء بياناتك وسنتواصل معك لتأكيد الطلب.</p>
                    <label for="name"><i class="fas fa-user"></i> الاسم بالكامل:</label>
                    <input type="text" id="name" name="الاسم" required>
                    <label for="phone"><i class="fas fa-phone"></i> رقم الموبايل:</label>
                    <input type="tel" id="phone" name="رقم الموبايل" required>
                    <label for="order-details"><i class="fas fa-gift"></i> المنتجات المطلوبة:</label>
                    <textarea id="order-details" name="المنتجات المطلوبة" readonly required></textarea>
                    <label for="address"><i class="fas fa-map-marker-alt"></i> العنوان بالتفصيل:</label>
                    <input type="text" id="address" name="العنوان" required placeholder="مثال: حدائق القبة، شارع ...">
                    <label for="location-link"><i class="fas fa-map-pin"></i> رابط موقعك (اختياري):</label>
                    <input type="url" id="location-link" name="رابط الموقع">
                    
                    <label for="delivery-options"><i class="fas fa-truck"></i> اختر طريقة التوصيل:</label>
                    <select id="delivery-options" name="نوع التوصيل" onchange="updateTotal()" required>
                        <option value="" disabled selected>-- اختر من هنا --</option>
                        <option value="توصيل لأقرب محطة مترو (40 جنيه)" data-cost="40">توصيل لأقرب محطة مترو (40 جنيه)</option>
                        <option value="توصيل للمنزل (60 جنيه)" data-cost="60">توصيل للمنزل (60 جنيه)</option>
                    </select>

                    <input type="hidden" id="products-price-hidden" name="سعر المنتجات">
                    <input type="hidden" id="total-price-hidden" name="التكلفة الإجمالية">
                    
                    <div id="total-price-container" style="display: none;">
                        <div class="total-price-display">السعر الإجمالي: <span id="total-price-value">0</span> جنيه</div>
                    </div>
                    
                    <div class="form-instructions"><i class="fab fa-whatsapp"></i> بعد تأكيد الطلب، يرجى إرسال الصور على واتساب.</div>
                    <button type="submit" class="cta-button" style="width: 100%;"><i class="fas fa-check-circle"></i> تأكيد الطلب الآن</button>
                </form>
            </div>
        </div>
    </div>
    
    <footer id="footer"></footer>
    <div id="confirmation-modal" class="modal-overlay">
        <div class="modal-content"><h2>تم استلام طلبك بنجاح!</h2><p>شكرًا لك! سنتواصل معك قريبًا.</p><button class="close-button" onclick="closeConfirmationModal()">حسنًا</button></div>
    </div>

    <script>
        // --- الكود الكامل والنهائي ---

        let cartItems = [];
        let productsPrice = 0;
        const mainContent = document.getElementById('main-content');
        const footer = document.getElementById('footer');
        const cartCountSpan = document.getElementById('cart-count');
        const orderDetailsTextarea = document.getElementById('order-details');
        
        // --- دالة لإظهار المحتوى الرئيسي ---
        function showMainPage(event, targetId) {
            if (event) event.preventDefault();
            mainContent.style.display = 'block';
            footer.style.display = 'block';
            document.querySelectorAll('.page-view').forEach(page => page.style.display = 'none');
            if (targetId) {
                document.querySelector(targetId).scrollIntoView({ behavior: 'smooth' });
            } else {
                window.scrollTo(0, 0);
            }
        }
        
        // --- دالة لإظهار الصفحات الفرعية ---
        function showPage(pageId) {
            mainContent.style.display = 'none';
            footer.style.display = 'none';
            document.querySelectorAll('.page-view').forEach(page => page.style.display = 'none');
            const activePage = document.getElementById(pageId);
            if (activePage) {
                activePage.style.display = 'block';
                window.scrollTo(0, 0);
            }
        }

        // --- نظام السلة ---
        function addToCart(button, itemName, itemPrice) {
            if (cartItems.some(item => item.name === itemName)) {
                alert("هذا المنتج موجود بالفعل في السلة!");
                return;
            }
            cartItems.push({ name: itemName, price: Number(itemPrice) });
            updateCartDetails();
            button.innerHTML = '<i class="fas fa-check"></i> تمت الإضافة';
            button.disabled = true;
        }

        function updateCartDetails() {
            cartCountSpan.innerText = cartItems.length;
            orderDetailsTextarea.value = cartItems.map(item => item.name).join('، ');
            productsPrice = cartItems.reduce((total, item) => total + item.price, 0);
            document.getElementById('products-price-hidden').value = productsPrice;
            updateTotal(); // تحديث السعر الإجمالي في حال تغيير السلة
        }
        
        // --- دالة حساب السعر الإجمالي مع التوصيل ---
        function updateTotal() {
            const deliverySelect = document.getElementById('delivery-options');
            if (!deliverySelect) return;
            const selectedOption = deliverySelect.options[deliverySelect.selectedIndex];
            const deliveryCost = Number(selectedOption.dataset.cost) || 0;
            
            if (deliveryCost > 0) {
                const total = productsPrice + deliveryCost;
                document.getElementById('total-price-value').textContent = total;
                document.getElementById('total-price-hidden').value = total;
                document.getElementById('total-price-container').style.display = 'block';
            } else {
                 document.getElementById('total-price-container').style.display = 'none';
            }
        }

        // --- إرسال النموذج ---
        const form = document.getElementById('checkout-form-element');
        form.addEventListener("submit", function handleSubmit(event) {
            event.preventDefault();
            const scriptURL = 'https://script.google.com/macros/s/AKfycbxvPzOa6paLV2sHRHRGmJhYrt5eO6bM3YNNI7vOoHMTBiUehWSZzWUi0vA2QIdWzTU/exec';
            const submitButton = form.querySelector('button[type="submit"]');
            submitButton.disabled = true;
            submitButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ...جاري الإرسال';
            fetch(scriptURL, { method: 'POST', body: new FormData(form)})
                .then(response => {
                    if (response.ok) document.getElementById('confirmation-modal').style.display = 'flex';
                    else throw new Error('Network response was not ok.');
                })
                .catch(error => alert('عذرًا، حدث خطأ. يرجى المحاولة مرة أخرى.'))
                .finally(() => {
                    submitButton.disabled = false;
                    submitButton.innerHTML = '<i class="fas fa-check-circle"></i> تأكيد الطلب الآن';
                });
        });

        function closeConfirmationModal() {
            document.getElementById('confirmation-modal').style.display = 'none';
            form.reset();
            cartItems = [];
            productsPrice = 0;
            updateCartDetails();
            document.getElementById('total-price-container').style.display = 'none';
            document.querySelectorAll('.add-to-cart-btn, #weekly-offer-btn').forEach(button => {
                button.disabled = false;
                // إعادة النص الأصلي للأزرار
            });
            showMainPage(null, '#');
        }

        // --- تحميل محتوى الموقع عند بدء التشغيل ---
        document.addEventListener('DOMContentLoaded', () => {
            // قم بتحميل المحتوى الرئيسي هنا
            mainContent.innerHTML = `
                <main>
                    <section class="hero" style="/* styles */"> ... </section>
                    <!-- باقي الأقسام -->
                </main>
            `;
            footer.innerHTML = `<div class="container"><p>جميع الحقوق محفوظة © 2025 - Enjoy The Gifts</p></div>`;
            showMainPage(null, '#');
        });
    </script>
</body>
</html>
